// Generated by CoffeeScript 1.7.1
(function() {
  var initEventSource, main;

  main = function() {
    return initEventSource();
  };

  initEventSource = function() {
    var eventSource;
    eventSource = new EventSource("api/messages");
    eventSource.onopen = function(event) {
      return console.log("eventSource open");
    };
    eventSource.onerror = function(event) {
      console.log("error opening eventSource " + event.target.url);
      console.log("will attempt reconnect in 1 second");
      setTimeout(initEventSource, 1000);
      return eventSource.close();
    };
    return eventSource.onmessage = function(event) {
      var data;
      if (event.data == null) {
        console.log("got null for the status; rut-ro");
        return;
      }
      data = JSON.parse(event.data);
      return console.log("got " + event.data);
    };
  };

  main();

}).call(this);
